\ProvidesPackage{arky}

% todo list!
% - table of contents rework
% - probably clean up symbols and whatever. add in ones i need
% - tabular system?
% - reduce space in maketitle macro
% - reduce margins, i think, i need more space here :(
% - package options: include algebra symbols, topo. symbols only, etc... or "all"
% - hrulebar fix
% - caveat emptor

% ----------------------------------------------------------------
% Packages
% ----------------------------------------------------------------
\usepackage{amsmath, amssymb} % math stuff & symbols
\usepackage{amsthm, thmtools} % theorem environments
\usepackage{paralist} % for the parlist command

\PassOptionsToPackage{svgnames,dvipsnames,table}{xcolor} % apparently this is to stop like, beamer from acting up? usenames is also obsolete
\usepackage{xcolor}
\definecolor{airforceblue}{rgb}{0.36, 0.54, 0.66}
\definecolor{amber}{rgb}{1.0, 0.49, 0.0}
\definecolor{crimson}{rgb}{0.86, 0.08, 0.24}
\definecolor{amethyst}{rgb}{0.6, 0.4, 0.8}

\usepackage[colorlinks=true]{hyperref}
\hypersetup{urlcolor=RubineRed,linkcolor=RoyalBlue,citecolor=ForestGreen}
\usepackage[nameinlink]{cleveref} % reference to environments, SPECIFICALLY nameinlink

\usepackage[shortlabels]{enumitem} % shortlabels allows (i), 1., (a), etc. ig?
% \usepackage[obeyFinal,textsize=scriptsize,shadow]{todonotes} % disabled for now
% \usepackage{textcomp} % https://www.tug.org/texlive/Contents/live/texmf-dist/doc/latex/base/source2e.pdf something in here?
\usepackage{multirow} % you could also use nicematrix, but im just leaving it in...
\usepackage{nicematrix} % for tabulars and whatever and matrices. cuz hell idk

\usepackage{mathtools} % https://texdoc.org/serve/mathtools/0 tl;dr extra things
\usepackage[nopatch=footnote]{microtype} % reduced underfull overfull hbox warnings; "unable to apply patch 'footnote' -> nopatch it.
\usepackage{mathrsfs} % mathscr
\usepackage{textcomp} % in-text symbols

% note! other tikz packages to be ADDED IN on a documeny by document basis... so it wont be done here.
\usepackage{tikz-cd}
\usetikzlibrary{decorations.pathmorphing}

\usepackage[xcolor,leftbars]{changebar} % experimental red bar on the side
\setlength{\changebarsep}{0.2in}

% generally don't need these, document-by-document inclusion basis.
%\usepackage{standalone}
%\usepackage{import}

% ----------------------------------------------------------------
% Document Style Setup (first part is article, second is scrartcl)
% ----------------------------------------------------------------
\@ifundefined{KOMAClassName}{ % if no koma (scrartcl)
	\usepackage{fancyhdr}
	\setlength{\headheight}{0.75in}
	\setlength{\oddsidemargin}{0in}
	\setlength{\evensidemargin}{0in}
	\setlength{\voffset}{-1.0in}
	\setlength{\headsep}{10pt}
	\setlength{\textwidth}{6.5in}
	\setlength{\headwidth}{6.5in}
	\setlength{\textheight}{8.75in}
	\setlength{\parskip}{1ex plus 0.5ex minus 0.2ex}
	\setlength{\footskip}{0.3in}
}
{ % if koma is used, ...
	\usepackage[headsepline]{scrlayer-scrpage}
	\@ifundefined{chapter}{}{
		\addtokomafont{partprefix}{\rmfamily}
		\renewcommand*{\partformat}{\color{purple}
			\scalebox{2.5}{\thepart}\enlargethispage{2em}}
		\addtokomafont{chapterprefix}{\raggedleft}
		\RedeclareSectionCommand[beforeskip=0.5em]{chapter}
		\renewcommand*{\chapterformat}{\mbox{%
			\scalebox{1.5}{\chapappifchapterprefix{\nobreakspace}}%
			\scalebox{2.718}{\color{purple}\thechapter}\enskip}}
	}
	\renewcommand*{\sectionformat}%
		{\color{purple}\S\thesection\enskip}
	\renewcommand*{\subsectionformat}%
		{\color{purple}\S\thesubsection\enskip}
	\renewcommand*{\subsubsectionformat}%
		{\color{purple}\S\thesubsubsection\enskip}
	\KOMAoptions{numbers=noenddot}

	\addtokomafont{subtitle}{\Large}
	\setkomafont{author}{\Large\scshape}
	\setkomafont{date}{\Large\normalsize}

	\renewcommand{\headfont}{}
	\addtolength{\textheight}{3.14cm}
	\setlength{\footskip}{0.5in}
	\setlength{\headsep}{10pt}
	%\setlength{\parskip}{8pt plus 1pt minus 1pt}
	\automark{section}
	
	\ihead{\footnotesize\textbf{\theauthor} (\thedate)}
	\chead{}
	\ohead{\footnotesize\textbf{\thetitle}}
	\cfoot{\pagemark}	
}

% ----------------------------------------------------------------
% Macros & Document Setup
% ----------------------------------------------------------------
\title{} % empty title to avoid crashes
\author{Arky!! :3c} % author can and should be changed if you're working in a different environment and ur not arky
\date{\today} % default
\providecommand{\thetitle}{\@title}
\providecommand{\theauthor}{\@author}
\providecommand{\thedate}{\@date}

% paragraph styling
\newcommand{\hrulebar}{ % to be FIXED. (indentation at the beginning)
  \par\hspace{\fill}\rule{0.95\linewidth}{.7pt}\hspace{\fill}
  \par\nointerlineskip \vspace{\baselineskip}
}
\newcommand{\confusion}[1]{ % add more if necessary
  \cbcolor{crimson}
  \begin{changebar}
    #1
  \end{changebar}
}

% general
\newcommand{\cbrt}[1]{\sqrt[3]{#1}} % cube root
\newcommand{\floor}[1]{\left\lfloor #1 \right\rfloor} % floor
\newcommand{\ceiling}[1]{\left\lceil #1 \right\rceil} % ceiling
\newcommand{\abs}[1]{\left\lvert #1 \right\rvert} % absolute value
\newcommand{\norm}[1]{\left\lVert #1 \right\rVert} % norm
\newcommand{\taking}[1]{\xrightarrow{#1}} % limit
\newcommand{\defeq}{\overset{\mathrm{def}}{=}} % definition in equation
\newcommand{\id}{\mathrm{id}} % identity
\newcommand{\ol}{\overline} % bar --- these four are just there to fix typeset
\newcommand{\ul}{\underline} % underline
\newcommand{\wt}{\widetilde} % tilde
\newcommand{\wh}{\widehat} % hat
%\newcommand{\th}{^{\text{th}}} % broken don't use
\DeclareMathOperator*{\lcm}{lcm} % lowest common multiple (i thought this was alr defined)

% general - maps
\newcommand{\liff}{\leftrightarrow} % rarely used
\newcommand{\lthen}{\rightarrow} % rarely used
\newcommand{\surjto}{\twoheadrightarrow} % surjection map
\newcommand{\injto}{\hookrightarrow} % injective map

% general - miscellaneous
\newcommand\restr[2]{{ % restriction
	\left.\kern-\nulldelimiterspace #1 \littletaller\right|_{#2}
}}
\newcommand{\littletaller}{\mathchoice{\vphantom{\big|}}{}{}{}} % for restriction
\newcommand{\opname}{\operatorname} % create an operator spontaneously

% symbols
\newcommand{\eps}{\varepsilon} % epsilon. duh
\newcommand{\catname}{\mathsf}

% fields, etc. (repurposed to be mathbb commands tbh)
\newcommand{\CC}{\mathbb C} % complex
\newcommand{\DD}{\mathbb D} % unit disc centered @ origin
\newcommand{\FF}{\mathbb F} % field, or just F
\newcommand{\HH}{\mathbb H} % half space and quaternions
\newcommand{\NN}{\mathbb N} % naturals
\newcommand{\QQ}{\mathbb Q} % rationals
\newcommand{\RR}{\mathbb R} % reals
\newcommand{\TT}{\mathbb T} % unit circle regarded as quotient R/Z
\newcommand{\ZZ}{\mathbb Z} % integers
% add smth about projective spaces?

% probability
\newcommand{\EE}{\mathbb E} % expectation
\newcommand{\PP}{\mathbb P} % probability
\DeclareMathOperator{\Var}{Var} % variance
\DeclareMathOperator{\Cov}{Cov} % covariance

% multivar calculus
\newcommand*\Eval[3]{\left.#1\right\rvert_{#2}^{#3}} % evaluating integral stuff
\DeclareMathOperator{\grad}{grad} % gradient
\let\div\relax
\DeclareMathOperator{\div}{div} % original is literally a division symbol
\DeclareMathOperator{\curl}{curl} % curl
\DeclareMathOperator{\Vol}{Vol} % as in volume

% partial diff eqs
% \newcommand{\pfrac}[2][]{\frac{\partial #1}{\partial #2}} % partials
% \newcommand{\bfx}{\mathbf x}
% \newcommand{\bfy}{\mathbf y}

% inequalities
\newcommand{\cycsum}{\sum_{\mathrm{cyc}}} % cyclic sum
\newcommand{\symsum}{\sum_{\mathrm{sym}}} % symmetric sum
\newcommand{\cycprod}{\prod_{\mathrm{cyc}}} % cyclic product
\newcommand{\symprod}{\prod_{\mathrm{sym}}} % symmetric product

% complex analysis
\DeclareMathOperator{\cis}{cis} % cis x + i sin x: shorthand
\DeclareMathOperator*{\argmin}{arg min} % complex; argument min
\DeclareMathOperator*{\argmax}{arg max} % complex; argument max

% real analysis - import from 357/457-1000 probably
% tbd

% functional analysis - import from joshua lau from MAT436
% tbd - fredholm, etc., calkin algebras
\DeclareMathOperator{\ind}{ind} % fredholm index
\DeclareMathOperator{\indx}{index} % fredholm index alternative
\DeclareMathOperator{\ev}{ev} % evaluation map
\DeclareMathOperator{\Fred}{Fred} % fredholm operator space
\DeclareMathOperator*{\esssup}{ess\,sup} % essential supremum
\DeclareMathOperator*{\essinf}{ess\,inf} % essential infimum

% operators
\DeclareMathOperator{\img}{im} % image
\DeclareMathOperator{\Img}{Im} % image (i feel like this is the categorical sense tho)
\DeclareMathOperator{\coker}{coker} % cokernel
\DeclareMathOperator{\Coker}{Coker} % cokernel
\DeclareMathOperator{\Ker}{Ker} % kernel (note that \ker is already defined)
\DeclareMathOperator{\rank}{rank} % rank
\DeclareMathOperator{\Spec}{Spec} % spectrum
\DeclareMathOperator{\Tr}{Tr} % trace
\DeclareMathOperator{\pr}{pr} % projection, other than \pi
\DeclareMathOperator{\ext}{ext} % extension
\DeclareMathOperator{\pred}{pred} % predecessor
\DeclareMathOperator{\dom}{dom} % domain (rarely used)
\DeclareMathOperator{\ran}{ran} % range (rarely used)
\DeclareMathOperator{\Hom}{Hom} % homomorphism
\DeclareMathOperator{\Mor}{Mor} % morphisms
\DeclareMathOperator{\End}{End} % endomorphism

% topology
\DeclareMathOperator{\diam}{diam} % diameter of a set, metric
\DeclareMathOperator{\bdry}{bdry} % boundary
\DeclareMathOperator{\Bdry}{Bdry} % boundary alternative
\DeclareMathOperator{\diag}{diag} % diagonal

% algebra
\let\mod\relax
\DeclareMathOperator{\mod}{mod} % yeah, fuck that space in front of the usual ams package's mod or something. go away.
\DeclareMathOperator{\ord}{ord} % order
\DeclareMathOperator{\charin}{char} % characteristic
\DeclareMathOperator{\spn}{span} % because span is a command already
% \DeclareMathOperator{\clspn}{\overline{span}} % idk.
\DeclareMathOperator{\sign}{sign} % sign
\DeclareMathOperator{\Aut}{Aut} % automorphism
\DeclareMathOperator{\Inn}{Inn} % inner automorphism
\DeclareMathOperator{\Syl}{Syl} % sylow
\DeclareMathOperator{\Gal}{Gal} % galois
\DeclareMathOperator{\GL}{GL} % general linear group
\DeclareMathOperator{\SL}{SL} % special linear group
\newcommand{\inv}{^{-1}} % inverses

% lie and primes - frakturs
\newcommand{\kb}{\mathfrak b}
\newcommand{\kg}{\mathfrak g}
\newcommand{\kh}{\mathfrak h}
\newcommand{\kn}{\mathfrak n}
\newcommand{\ku}{\mathfrak u}
\newcommand{\kz}{\mathfrak z}
\newcommand{\km}{\mathfrak m}
\newcommand{\kp}{\mathfrak p} % primes
\newcommand{\kq}{\mathfrak q} % primes
\DeclareMathOperator{\Ext}{Ext} % Ext functor
\DeclareMathOperator{\Tor}{Tor} % Tor functor
\newcommand{\GF}{\opname{GF}}
\newcommand{\gl}{\opname{\mathfrak{gl}}} % frak gl group
\newcommand{\sl}{\opname{\mathfrak{sl}}} % frak sl group

% calligraphy letters
\newcommand{\SA}{\mathcal A}
\newcommand{\SB}{\mathcal B}
\newcommand{\SC}{\mathcal C} % C^r spaces
\newcommand{\SD}{\mathcal D}
\newcommand{\SE}{\mathcal E}
\newcommand{\SF}{\mathcal F} % Fourier transform
% \newcommand{\SL}{\mathcal L} % what do i even use to replace this
\newcommand{\SM}{\mathcal M}
\newcommand{\SN}{\mathcal N}
\newcommand{\SO}{\mathcal O} % open cover
\newcommand{\SP}{\mathcal P}
\newcommand{\SQ}{\mathcal Q}
\newcommand{\SR}{\mathcal R}
% \newcommand{\SS}{\mathcal S}
\newcommand{\ST}{\mathcal T} % topology

% script letters
\newcommand{\SCA}{\mathscr A}
\newcommand{\SCB}{\mathscr B}
\newcommand{\SCC}{\mathscr C}
\newcommand{\SCD}{\mathscr D}
\newcommand{\SCE}{\mathscr E}
\newcommand{\SCF}{\mathscr F}
\newcommand{\SCG}{\mathscr G}
\newcommand{\SCH}{\mathscr H}

% non-math
\newcommand{\mailto}[1]{\href{mailto:#1}{\texttt{#1}}}

% ----------------------------------------------------------------
% Environments
% ----------------------------------------------------------------
\newenvironment{parlist}{\begin{inparaenum}[(i)]}{\end{inparaenum}} % as in, "in paragraph enumerate; it'll output as like (i) ... (ii) ... all in one line
\newenvironment{gobble}{\setbox\z@\vbox\bgroup}{\egroup} % i'm going to leave this in here to figure out for later.

\newenvironment{solution}{\begin{proof}[Solution]}{\end{proof}}
\newenvironment{subproof}[1][Subproof]{ % i mean. do i want it to say proof or subproof? hell, it's not even indented
\begin{proof}[#1] \renewcommand{\qedsymbol}{$\blacksquare$}} 
{\end{proof}}

\theoremstyle{definition}

% use numberwithin for where you want the counter to start
% sibling = count together
\declaretheorem[name=Theorem,numberwithin=section]{theorem} 
\declaretheorem[name=Lemma,sibling=theorem]{lemma}
\declaretheorem[name=Definition,sibling=theorem]{definition}
\declaretheorem[name=Proposition,sibling=theorem]{proposition}
\declaretheorem[name=Corollary,sibling=theorem]{corollary}
\declaretheorem[name=Remark,sibling=theorem]{remark}
\declaretheorem[name=Conjecture,sibling=theorem]{conjecture}
\declaretheorem[name=Fact,sibling=theorem]{fact}

\declaretheorem[name=Theorem,numbered=no]{theorem*}
\declaretheorem[name=Lemma,numbered=no]{lemma*}
\declaretheorem[name=Definition,numbered=no]{definition*}
\declaretheorem[name=Proposition,numbered=no]{proposition*}
\declaretheorem[name=Corollary,numbered=no]{corollary*}
\declaretheorem[name=Remark,numbered=no]{remark*}
\declaretheorem[name=Conjecture,numbered=no]{conjecture*}
\declaretheorem[name=Fact,numbered=no]{fact*}

\declaretheorem[name=Claim,sibling=theorem]{claim}
\declaretheorem[name=Example,sibling=theorem]{example}
\declaretheorem[name=Exercise,sibling=theorem]{exercise}
\declaretheorem[name=Problem,sibling=theorem]{problem}
\declaretheorem[name=Question,sibling=theorem]{question}
\declaretheorem[name=Problem]{hwproblem} % homework use

\declaretheorem[name=Claim,numbered=no]{claim*}
\declaretheorem[name=Example,numbered=no]{example*}
\declaretheorem[name=Exercise,numbered=no]{exercise*}
\declaretheorem[name=Problem,numbered=no]{problem*}
\declaretheorem[name=Question,numbered=no]{question*}
% \declaretheorem[name=Problem,numbered=no]{hwproblem*} % homework use % just use problem